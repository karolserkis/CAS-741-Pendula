\documentclass[12pt, titlepage]{article}

\usepackage{xr-hyper}
\usepackage{hyperref}
\usepackage{amsmath, mathtools}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{caption}
\usepackage{pdflscape}
\usepackage{afterpage}
\usepackage{tabu}
\usepackage{verbatim}
\usepackage{url}
\usepackage{tikz}
\usepackage{enumitem}
\usepackage{extarrows}
\usepackage{booktabs}
\usepackage[round]{natbib}
\usetikzlibrary{shapes.geometric, arrows}

\captionsetup{belowskip=12pt,aboveskip=4pt}

\makeatletter
\newcommand*\bigcdot{\mathpalette\bigcdot@{.7}}
\newcommand*\bigcdot@[2]
  {\mathbin{\vcenter{\hbox{\scalebox{#2}{$\m@th#1\bullet$}}}}}
\makeatother

%\usepackage{refcheck}

\hypersetup{
    bookmarks=true,         % show bookmarks bar?
    colorlinks=true,        % false: boxed links; true: colored links
    linkcolor=red,          % color of internal links 
                            %  (change box color with linkbordercolor)
    citecolor=blue,         % color of links to bibliography
    filecolor=magenta,      % color of file links
    urlcolor=blue           % color of external links
}

\usepackage{fullpage}

\input{../../Comments}
\input{../../Common}
\externaldocument{../../SRS/SRS}
\externaldocument{../../Design/MG/MG}

\newcommand{\sskip}{\vskip 1mm}

% For easy change of table widths
\newcommand{\colZwidth}{1.0\textwidth}
\newcommand{\colAwidth}{0.13\textwidth}
\newcommand{\colBwidth}{0.82\textwidth}
\newcommand{\colCwidth}{0.1\textwidth}
\newcommand{\colDwidth}{0.05\textwidth}
\newcommand{\colEwidth}{0.8\textwidth}
\newcommand{\colFwidth}{0.17\textwidth}
\newcommand{\colGwidth}{0.5\textwidth}
\newcommand{\colHwidth}{0.28\textwidth}

% Used so that cross-references have a meaningful prefix
\newcounter{datadefnum} %Datadefinition Number
\newcommand{\ddthedatadefnum}{DD\thedatadefnum}
\newcommand{\ddref}[1]{DD\ref{#1}}
\newcounter{theorynum} %Theory Number
\newcommand{\tthetheorynum}{T\thetheorynum}
\newcommand{\tref}[1]{T\ref{#1}}
\newcounter{assumpnum} %Assumption Number
\newcommand{\atheassumpnum}{P\theassumpnum}
\newcommand{\aref}[1]{A\ref{#1}}
\newcounter{goalnum} %Goal Number
\newcommand{\gthegoalnum}{P\thegoalnum}
\newcommand{\gsref}[1]{GS\ref{#1}}
\newcounter{instnum} %Instance Number
\newcommand{\itheinstnum}{IM\theinstnum}
\newcommand{\iref}[1]{IM\ref{#1}}
\newcounter{reqnum} %Requirement Number
\newcommand{\rthereqnum}{P\thereqnum}
\newcommand{\rref}[1]{R\ref{#1}}
\newcounter{nfreqnum} %NF Requirement Number
\newcommand{\rthenfreqnum}{P\thenfreqnum}
\newcommand{\nfref}[1]{NF\ref{#1}}
\newcounter{lcnum} %Likely change number
\newcommand{\lthelcnum}{LC\thelcnum}
\newcommand{\lcref}[1]{LC\ref{#1}}
\newcommand{\sref}[1]{\S~\ref{#1}}

\usepackage{fullpage}

\newcounter{acnum}
\newcommand{\actheacnum}{AC\theacnum}
\newcommand{\acref}[1]{AC\ref{#1}}

\newcounter{ucnum}
\newcommand{\uctheucnum}{UC\theucnum}
\newcommand{\uref}[1]{UC\ref{#1}}

\newcounter{mnum}
\newcommand{\mthemnum}{M\themnum}
\newcommand{\mref}[1]{M\ref{#1}}

\begin{document}

\title{CAS 741: Unit Verification and Validation Plan\\[10pt]
\Large Dynamical Systems: \progname}
\author{Karol Serkis\\\texttt{serkiskj@mcmaster.ca}\\GitHub:
\href{https://www.github.com/karolserkis}{karolserkis}}
\date{\today}
	
\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{4cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
December 5, 2018 & 1.0 &  First full draft for submission\\
December 17, 2018 & 2.0 & All GitHub issues and comments addressed \\
December 18, 2018 & 3.0 & Bibliography fixed, 
\& program name fixed \\
\bottomrule
\end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation at:\\
\url{https://github.com/karolserkis/CAS-741-Pendula/blob/master/docs/SRS/SRS.pdf}\\
The symbols are listed in alphabetical order.\\

\renewcommand{\arraystretch}{1.2}
\begin{tabular}{l l} 
  \toprule		
  \textbf{symbol} & \textbf{description}\\
  \midrule 
  A & Assumption\\
  DD & Data Definition\\
  FT & Functional Test \\
  GD & General Definition\\
  GS & Goal Statement\\
  IM & Instance Model\\
  LC & Likely Change\\
  MG & Module Guide\\ 
  MIS & Module Interface Specification\\ 
  NF & Non-Functional Requirement\\
  R & Requirement\\
  SRS & Software Requirements Specification\\
  T & Test\\
  VnV & Verification and Validation\\ 
  \bottomrule
\end{tabular}\\

\subsection{Table of Units}

Throughout this document SI (Syst\`{e}me International d'Unit\'{e}s) is
employed as the unit system. In addition to the basic units, several derived
units are
used as described below.  For each unit, the symbol is given followed by a
description of the unit and the SI name.\\

\renewcommand{\arraystretch}{1.2}
\begin{table}[h!]
	\centering
\begin{center}
  \noindent \begin{tabular}{l l l} 
    \toprule		
    \textbf{symbol} & \textbf{unit} & \textbf{SI}\\
    \midrule 
    \si{\metre} & length & metre\\
    \si{\kilogram} & mass & kilogram\\
    \si{\second} & time & second\\
    \si{\degree} & angle & degree\\
    \bottomrule
  \end{tabular}
\end{center}
	\caption{Table of Units}
	\label{Table:R_trace}
\end{table}

\newpage

\tableofcontents

\listoftables

%\listoffigures

\newpage

\pagenumbering{arabic}

The purpose of the document is to provide the Unit Verification and Validation Plan for testing the \progname{}software with 
respect to the requirements (see SRS document). Unit Verification and 
Validation plan consists of outlining test cases for particular units of a 
software's modules. These tests are created to ensure that the units satisfy 
the software's functional and nonfunctional requirements. The tests can be 
traced to a particular module. The module should be traced to a particular 
requirement. 

\section{General Information}

This documents is an Unit VnV Plan for the \progname program. The
directory for this project can be found at GitHub:
\href{https://github.com/karolserkis/CAS-741-Pendula/}{/karolserkis/CAS-741-Pendula/}\\

\subsection{Purpose}

The purpose of this document is to describe the unit VnV plan and requirements for the
\progname program solution that
only focuses on multi-pendulum simulations (double \& triple pendula and beyond) and tracking the chaotic
motion of the system. It will allow users to generate trajectory simulation and
plot kinetic and potential energy over time using two different ODE/DAE initial value
problem solvers. In the case of a double pendulum you have a new system that is dynamic and chaotic and
requires a set of coupled ordinary differential equation solvers. Once one
introduces multiple pendula the system becomes chaotic and interesting 
to model and simulate. 

\subsection{Scope}

The scope of the \progname program is limited to the generation 
of diagrams and plot trajectories that are possible to run and compute on a
local system.

The scope of the test plan is described below:
\begin{itemize}
\item \progname{} will be written in Python.
\item The proposed test plan is focusing on system and unit testing to
  verify the functional and non functional requirements of
  \progname{}
\end{itemize}

The \progname is limited to the user
initialized inputs and the output of the \progname will either plot trajectories over time, generate
plots of kinetic and potential energy and limit the user to a specific duration of the simulation, 
in order to allow diagrams and trajectory history to be saved.
The user will be able to set a range of time and initialize the system. \\

The modules that might be tested for under the Unit VnV plan that are traced to the SRS requirements are:
\begin{description}
\item [\mref{mGM}:] \progname GUI Module
\item [\mref{mIM}:] User Input Parameters Module
\item [\mref{mLM}:] Lagrangian Module
\item [\mref{mDM}:] Data Structure Module
\item [\mref{mPM}:] Generic Plot Module
\item [\mref{mTM}:] Trajectory Simulation Module
\end{description}

%\subsection{Overview of Document}

\section{Plan}
	
%\subsection{Software Description}

\subsection{Test Team}

The Verification and Validation team consists of:\\\\
Karol Serkis

\subsection{Automated Testing Approach}

Unit-based scripts can be created for testing the modules in \progname{}and be tested automatically with 
scripts written in pytest. The test scripts using pytest will cycle through an array of data and check an assert 
statement. See section on verification tools for more information.

\subsection{Verification Tools}

Python has a few open source unit testing frameworks: \url{https://docs.pytest.org}. \\
Unit-based scripts can be created for testing the modules in \progname. The functions and classes that automate 
this process are detailed in the following link: 
\url{https://github.com/pytest-dev/pytest}.\\
\wss{Thoughts on what tools to use, such as the following: unit testing
  framework, valgrind, static analyzer, make, continuous integration, test
  coverage tool, etc.}

% \subsection{Testing Schedule}
		
% See Gantt Chart at the following url ...

\subsection{Non-Testing Based Verification}

The non-testing based verification will involve a code inspection by myself and
Dr.\ Smith during final submission. He will inspect each of the modules to
guarantee that the 
physical equations have been implemented successfully, verify that the software 
is designed to be maintainable and manageable and complete the 
two surveys in the appendix.\\
\wss{I will be reviewing your final documentation (for the purpose of grading),
  but the scope of the review you are proposing for me is beyond the time I have available.}
\wss{List any approaches like code inspection, code walk-through, symbolic
  execution etc.  Enter not applicable if that is the case.}

\section{Unit Test Description}

The modules that are being unit tested are specified in the MIS 
(\url{https://github.com/karolserkis/CAS-741-Pendula/blob/master/docs/}). The Unit VnV plan 
ensure that each module is behaving accurately and that each module is 
satisfying the SRS requirements.\\ 
	
\subsection{Tests for Functional Requirements}

\subsubsection{User Input Module}

The following tests were created to ensure that the input parameters module is 
storing the correct values specified by the user. This first step is critical 
as all of the other modules rely on these quantities.

\begin{enumerate}				
\item{test-InParams\\}

Type: Automatic

Initial State: number of pendulum rods - nlinks\\
nlinks N (default N=1)

Output: assert=True

Test Case Derivation: The environment variable inputted by the user should 
match the state variable meant to store the value.\\
Ex. units for length, mass and time cannot be negative.

How test will be performed: Integer numbers will be inputed in the environment. 
An assert statement will return true if these are equal.

\wss{The output field should be the expected output, not an assert statement.  I
  do not know how to do your test case.  There should be enough information with
a test case that someone could independently write it.  You also aren't using
the distinction between the environment variables and state variables correctly.}
    
\end{enumerate}

\subsubsection{\progname Lagrangian Module Testing}

The following tests were created to ensure that the input parameters module and
data structure is being taken and applied to a Lagrangian calculation that is later
applied to the control module and simulation. This step is critical 
as all of the other modules rely on these calculations.

\begin{enumerate}				
	\item{test-Lagrangian\\}
	
	Type: Automatic
	
	Initial State: 
	
	Input: Input from test-InParams and preset constants:\\
  \noindent \begin{tabular}{l l l} 
    \toprule		
    \textbf{symbol} & \textbf{unit} & \textbf{SI}\\
    \midrule 
    \si{\metre} & length & metre\\
    \si{\kilogram} & mass & kilogram\\
    \si{\second} & time & second\\
    \si{\degree} & angle & degree\\
    \bottomrule
  \end{tabular}
	
	Output: assert=True
	
	Test Case Derivation: From instance model of the SRS it follows that:
	Pendulum Lagrangian ($L=T-V$)
	(Refer to SRS for equations)
	
	How test will be performed: We will check to see if each pendula and plot behaves as expected.
	Testing the Kinetic Energy equation:
	$$ T = \displaystyle\frac{1}{2}m_1v_1^2 + \frac{1}{2}m_2v_2^2 $$
$$ = \frac{1}{2}m_1(\dot{x}_1^2 + \dot{y}_1^2) + \frac{1}{2}m_2(\dot{x}_2^2 +
\dot{y}_2^2) $$
$$ = \frac{1}{2}m_1 l_1^2 \dot{\theta}_1^2 + \frac{1}{2}m_2\left[l_1^2
\dot{\theta}_1^2 + l_2^2 \dot{\theta}_2^2 + 2l_1l_2\dot{\theta}_1\dot{\theta}_2
\cos(\theta_1 - \theta_2)\right]$$
			
\end{enumerate} 

\wss{Your tests are not complete.  You say that you will check whether the
  pendula behaves as expected, but you don't say how this will be determined.
  You give equations, but not how they will be compared.  If you are looking at
  time histories, maybe you can calculate the norm of the difference between the
calculated and expected time histories.  Another option is to compare to Dr.\
Nedialkov's software.  Again, you could calculate the norm of the residual of
the difference between your calculations and Dr.\ Nedialkov's software and
yours.}
		
\subsubsection{Plotting Module} 

\begin{enumerate}				
	\item{test-Plotting\\}
	
	Type: Manual
	
	Initial State: 
	
	Input: User Input, Data structure\\
	Input from Table of Units:\\
  \noindent \begin{tabular}{l l l} 
    \toprule		
    \textbf{symbol} & \textbf{unit} & \textbf{SI}\\
    \midrule 
    \si{\metre} & length & metre\\
    \si{\kilogram} & mass & kilogram\\
    \si{\second} & time & second\\
    \si{\degree} & angle & degree\\
    \bottomrule
  \end{tabular}
	
	Output: Time pendulum trail plot of Kinetic and Potential Energy
	
	Test Case Derivation: The Lagrangian Module and Data structure module should produce valid
	output that corresponds to the reference material and examples.
	
	How test will be performed: I will inspect the plots to see if 
	they resemble the examples in my references. See
        references [1] and [7]
\end{enumerate} 

\begin{enumerate}				
	\item{test-Plotting-Trajectory\\}
	
	Type: Manual
	
	Initial State: 
	
	Input: User Input, Data structure
$$\sum \mathbb{R} (\texttt{for Langrangian equation})$$
$$ P(x) :\mathbb{Z} \times \mathbb{R} \implies \mathbb{R}$$\\
	
	Output: Trajectory plot of multiple pendula
	
	Test Case Derivation: The Lagrangian Module and Data structure module should produce valid
	output that corresponds to the reference material and examples.
	
	How test will be performed: I will inspect the plots to see if 
	they resemble the examples in my references. See references [1],[2],[3],[4],[5] and [6].
\end{enumerate}

\subsubsection{GUI/Plot Module} 

\begin{enumerate}				
	\item{test-GUI-Plot-Simulation\\}
	
	Type: Manual
	
	Initial State: 
	
	Input: User Input, Data structure\\
	Input from Table of Units:\\
  \noindent \begin{tabular}{l l l} 
    \toprule		
    \textbf{symbol} & \textbf{unit} & \textbf{SI}\\
    \midrule 
    \si{\metre} & length & metre\\
    \si{\kilogram} & mass & kilogram\\
    \si{\second} & time & second\\
    \si{\degree} & angle & degree\\
    \bottomrule
  \end{tabular}
	
	Output: GUI interface and pendulum trail plot with axis
	
	Test Case Derivation: The Lagrangian Module, Hamiltonian Module and Data structure module should produce valid
	output that corresponds to the reference material and examples.
	
	Check GUI for visual integrity
	
	How test will be performed: I will inspect the plots to see if 
	they resemble the examples in my references. See references [1],[2],[3],[4],[5] and [6].
\end{enumerate} 

\subsection{Tests for Nonfunctional Requirements}

Planning for nonfunctional tests of units will not be relevant to \progname. 
For system tests related to Nonfunctional requirements please see the System 
Verification and Validation Plan at 
\url{https://github.com/karolserkis/CAS-741-Pendula/blob/master/docs/}. 

\subsection{Traceability Between Test Cases and Requirements}

\begin{table}[H]
	\centering
	\label{Table:trace}
	\begin{tabular}{|c|c|c|c|c|c|c|}
		\hline        
		& \tref{lagrangian}
		& \tref{kinetic}
		& \tref{potential}
		& \ddref{real-interv}
		& \iref{add-real} \\
		\hline
        \tref{lagrangian} & X & X & X & X & X \\ \hline
        \tref{kinetic} & X & X & X & X & X\\ \hline
        \tref{potential} & X & X & X & X & X\\ \hline
        \ddref{real-interv} & X & X & X & X & X\\ \hline
        \iref{add-real} & X & X & X & X & X\\ \hline
	\end{tabular}
	\caption{Traceability Matrix Showing the Connections Between Items of 
	Different Sections}
\end{table}


\begin{table}[h!]
	\centering
	\begin{tabular}{|c|c|c|c|c|c|c|}
		\hline        
		& \tref{lagrangian}
		& \tref{kinetic}
		& \tref{potential}
		& \ddref{real-interv}
		& \iref{add-real} \\
		\hline
        \rref{funinput} & X & X & X & X & X \\ \hline
        \rref{funkin} & X & X & X & X & X\\ \hline
        \rref{funlagrang} & X & X & X & X & X \\ \hline
        \rref{funplot} & X & X & X & X & X\\ \hline
	\end{tabular}
	\caption{Traceability Matrix Showing the Connections Between Requirements 
	and Instance Models}
	\label{Table:R_trace}
\end{table}

% \section{Tests for Proof of Concept}

% \subsection{Area of Testing1}
		
% \paragraph{Title for Test}

% \begin{enumerate}

% \item{test-id1\\}

% Type: Functional, Dynamic, Manual, Static etc.
					
% Initial State: 
					
% Input: 
					
% Output: 
					
% How test will be performed: 
					
% \item{test-id2\\}

% Type: Functional, Dynamic, Manual, Static etc.
					
% Initial State: 
					
% Input: 
					
% Output: 
					
% How test will be performed: 

% \end{enumerate}

% \subsection{Area of Testing2}

% ...
				
\section{Unit Testing Plan}
		
\wss{Unit testing plans for internal functions and, if appropriate, output
  files}

\bibliographystyle{plainnat}

\bibliography{SRS}

\newpage

\section{Appendix}

This is where you can place additional information.

\subsection{Symbolic Parameters}

The definition of the test cases will call for SYMBOLIC\_CONSTANTS.
Their values are defined in this section for easy maintenance.

\subsection{Software Verification Checklist} 
\label{softwarevercheck}
\begin{itemize}
	\item Did any of the inputs you entered provide surprising results? 
	If yes, what were they?
	\item Were all of the plots legible? 
\end{itemize} 

\subsection{Usability Survey Questions?}
\begin{enumerate}
	\item Were you able to setup and execute the program using the comment
	and makefile instructions alone, or did you require additional troubleshooting/help? 
	If any steps were unclear, please explain how they might be improved.
	\item Did the program check for exceptions and provide feedback to your initial input?
	\item Did the program output the trajectory plot simulation?
	\item Did the program run the simulation to its completion and smoothly without issues?
	\item Did the plot of pendulum movement display correctly?
\end{enumerate}

\newpage

\bibliography {../../../ReferenceMaterial/References}
\bibliographystyle {plainnat}

\end{document}
